@startuml
skinparam sequence {
  ArrowColor #0066CC
  LifeLineBorderColor #0066CC
  LifeLineBackgroundColor #EEEEEE

  ParticipantBorderColor #0066CC
  ParticipantBackgroundColor #ADD8E6
  ParticipantFontColor #000000
  ParticipantFontSize 15

  ActorBorderColor #666666
  ActorBackgroundColor #EEEEEE
  ActorFontColor #333333
  ActorFontSize 15
}

skinparam note {
  BackgroundColor #FFE9B3
  BorderColor #E8C174
}

actor "User" as user
participant "FinTrekUi" as FT
participant "CommandRouter" as router
participant "CommandExecutor" as executor
participant "CommandRegistry" as registry
participant "SummaryCommand" as SC
participant "ExpenseReporter" as ER
participant "RegularExpenseManager" as REM

user -> FT: input "/summary food"
activate FT

FT -> router: routeUserInput("/summary FOOD")
activate router

router -> executor: dispatch("summary", "food")
activate executor

executor -> registry: getCommand("summary")
activate registry

registry --> executor: returns SummaryCommand
deactivate registry

executor -> SC: execute("food")
activate SC

SC -> ER: listSingleCategoryTotal("FOOD")
activate ER

ER -> ER: getTotalByCategory()
activate ER #FFBBBB

ER -> REM: getAll()
activate REM

REM --> ER: return new ArrayList<>(expenses)
deactivate REM

ER -> ER: filter by category and calculate total
ER --> ER: Map<String, Double> categoryTotals
deactivate ER

ER -> ER: getExpensesByCategory("food")
activate ER #FFBBBB

ER -> REM: getAll()
activate REM

REM --> ER: List<Expense>
deactivate REM

ER -> ER: filter expenses where category = "food"
ER --> ER: List<Expense> categoryExpenses
deactivate ER

ER -> ER: listExpenseBuilder(categoryExpenses)
activate ER #FFBBBB

loop for each expense in categoryExpenses
ER -> ER: format expense entry
end

ER --> ER: formatted expense list string
deactivate ER

ER --> SC: formatted category summary
deactivate ER

SC --> executor: CommandResult(success, message)
deactivate SC

executor --> router: CommandResult(success, message)
deactivate executor

router --> FT: RouteResult(success, message)
deactivate router

FT --> user: print success message
deactivate FT

@enduml