@startuml summary.puml

actor "User" as user
box Parser Logic #D7E4F4
participant "Parser" as parser
end box
ref over user, parser, SC: Parser Logic
participant ":SummaryCommand" as SC
participant ":ExpenseReporter" as ER
participant ":RegularExpenseManager" as REM

user -> parser: input "/summary food"
activate parser

parser -> SC: execute("food")
activate SC

SC -> ER: listSingleCategoryTotal("FOOD")
activate ER

ER -> ER: getTotalByCategory()
activate ER #FFBBBB

ER -> REM: getAll()
activate REM

REM --> ER
deactivate REM

ER -> ER: filter by category and calculate total
ER --> ER: Map<String, Double> categoryTotals
deactivate ER

ER -> ER: getExpensesByCategory("food")
activate ER #FFBBBB

ER -> REM: getAll()
activate REM

REM --> ER: List<Expense>
deactivate REM

ER -> ER: filter expenses where category = "food"
ER --> ER: List<Expense> categoryExpenses
deactivate ER

ER -> ER: listExpenseBuilder(categoryExpenses)
activate ER #FFBBBB

loop for each expense in categoryExpenses
ER -> ER: format expense entry
end

ER --> ER: formatted expense list string
deactivate ER

ER --> SC: formatted category summary
deactivate ER

SC --> parser: CommandResult(success, message)
deactivate SC

parser --> user: print message
deactivate parser

@enduml